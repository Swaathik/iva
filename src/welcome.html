<!--
  ~ Copyright 2015-2016 OpenCB
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<dom-module id="welcome-web">
    <template>
        <!--<style include="jso-styles">-->
        <style>
            .welcome-center {
                margin: auto;
                width: 75%;
                text-align: justify;
                font-size: 18px;
                color: #797979;
            }

            .right {
                width: 20%;
            }
        </style>

        <!-- This is where main application is rendered -->
        <div class="welcome-center">
            <div style="text-align: center">
                <br>
                <h1>The Human Genetic Variation Archive (HGVA)</h1>
                <br>
                <div style="font-size: 14px; text-align: justify">
                    <!--<img src="images/NIHR_BioResourceRareDiseases.png" width="120px" style="float: left;margin: 0px 20px 20px 0px">-->
                    <img src="img/opencb-logo.png" width="160px" style="float: left;margin: 0px 20px 10px 0px">
                    <p>
                        <a href="http://docs.opencb.org/display/hgva" target="_blank"><b>The Human Genomic Variation Archive (HGVA)</b> </a>
                        is an open access genetic variation resource that integrates all variants from key world-wide reference projects,
                        but also added-value information such as basic variant annotation, population frequencies, protein effect predictions,
                        variant-associated phenotypes, etc.
                    </p>
                    <p>
                        HGVA currently hosts about 2TB of data from 17 different studies describing about 700
                        million unique variants. HGVA is not a mere data archive, but a big data provider that enables users to
                        efficiently query, filter and retrieve relevant information from its knowledge-base, either from a
                        visual web-interface or programmatically using Python o R.
                    </p>
                </div>
                <br>
                <input type="text" class="form-control" id="welcomeSearchTextBox" style="text-align: center; height: 45px"
                       placeholder="Search for a gene, transcript, variant, multi-allelic variant, region, GO term or HPO term" on-keyup="triggerSearch">
                <p>Example: BRCA2, ENST00000342992, rs666, 10:15097577:G:C, 1:1-100000, GO:0000145, HP:0001756</p>
                <p>Current selected Project and Study are <a href="#projects"><b>{{project.alias}}</b></a> and
                    <a href="#projects"><b>{{study}}</b></a>
                </p>
            </div>
            <!--<h2>Overview</h2>-->
            <br>
            <br>
            <br>
            <h4>Note:</h4>
            <p style="font-size:14px">
                HGVA web application makes an intensive use of the HTML5 standard and other cutting-edge web technologies such as Web Components,
                so only modern web browsers are fully supported, these include Chrome 49+, Firefox 45+, Microsoft Edge 14+, Safari 10+ and Opera 36+.
            </p>
            <br>
        </div>
    </template>

    <script>
        class Welcome extends Polymer.Element {

            constructor() {
                super();
            }

            static get is() {
                return 'welcome-web';
            }
            
            static get properties() {
                return {
                    opencgaClient: {
                        type: Object
                    },
                    host: {
                        type: String,
                        value: "http://bioinfo.hpc.cam.ac.uk/hgva"
                    },
                    userId: {
                        type: String,
                        value: ""
                    },
                    project: {
                        type: Object,
                        value: ""
                    },
                    study: {
                        type: String,
                        value: ""
                    },
                    version: {
                        type: String
                    }
                }
            }

            _attachDom(dom) {
                this.appendChild(dom);
            }

            triggerSearch(e) {
                if (e.keyCode === 13) {
                    // fire according to the feature - gene, variant etc.
                    // this.fire("search", {value: this.$.welcomeSearchTextBox.value});
                    let _this = this;
                    this.dispatchEvent(new CustomEvent('search', {detail:
                            {
                                value: _this.$.welcomeSearchTextBox.value
                            }
                    }));
                    this.$.welcomeSearchTextBox.value = "";
                    $('.content').hide();
                }
            }
        }

        customElements.define(Welcome.is, Welcome);
    </script>
</dom-module>
